{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"D:\\\\music-app\\\\src\\\\components\\\\UploadFiles\\\\index.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState } from 'react';\nimport { storage, database } from '../../configFirebase';\nimport { FaCloudUploadAlt } from 'react-icons/fa';\nimport { AiFillCloseCircle } from 'react-icons/ai';\nimport './style.css';\nimport { IconContext } from 'react-icons/lib';\nUploadfiles.propTypes = {};\nUploadfiles.default = {\n  toggleFormUpload: false\n};\n\nfunction Uploadfiles(props) {\n  _s();\n\n  const [fileAudio, setfileAudio] = useState(null);\n  const [fileImage, setfileImage] = useState(null);\n  const [urlAudio, setUrlAudio] = useState(null);\n  const [urlImage, setUrlImage] = useState(null);\n  const [progessAudio, setProgessAudio] = useState(null);\n  const [progessImage, setProgessImage] = useState(null);\n  const [artistName, setAristName] = useState('');\n  const [audioName, setAudioName] = useState('');\n  const {\n    toggleFormUpload\n  } = props;\n\n  const handleChangeFiles = e => {\n    if (e.target.name === \"fileAudio\") {\n      setfileAudio(e.target.files[0]);\n    }\n\n    if (e.target.name === \"fileImage\") {\n      setfileImage(e.target.files[0]);\n    }\n  };\n\n  const handleChangeText = e => {\n    if (e.target.name === 'audioName') {\n      setAudioName(e.target.value);\n    } else {\n      setAristName(e.target.value);\n    }\n  };\n\n  const handleSaveAudio = () => {\n    if (fileAudio) {\n      const uploadTask = storage.ref(`Audios/${fileAudio.name}`).put(fileAudio);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progressBarAudio = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgessAudio(progressBarAudio);\n      }, error => {\n        console.log('err', error);\n      }, () => {\n        storage.ref(`Audios`).child(fileAudio.name).getDownloadURL().then(urlAudio => {\n          setUrlAudio(urlAudio);\n        });\n      });\n    } else {\n      console.log('err');\n    }\n  };\n\n  const handleSaveImage = () => {\n    if (fileImage) {\n      const uploadTask = storage.ref(`Images/${fileImage.name}`).put(fileImage);\n      uploadTask.on(\"state_changed\", snapshot => {\n        const progressBarImage = Math.round(snapshot.bytesTransferred / snapshot.totalBytes * 100);\n        setProgessImage(progressBarImage);\n      }, error => {\n        console.log('err', error);\n      }, () => {\n        storage.ref(`Images`).child(fileImage.name).getDownloadURL().then(urlImage => {\n          setUrlImage(urlImage);\n        });\n      });\n    } else {\n      console.log('err');\n    }\n  };\n\n  const onUploadDatabase = () => {\n    const databaseRef = database.ref('Audios');\n    databaseRef.push({\n      src: urlAudio,\n      image: urlImage,\n      name: audioName,\n      artist: artistName\n    }); // reset value\n\n    setAristName('');\n    setAudioName('');\n    setProgessAudio(0);\n    setProgessImage(0);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `form-upload ${toggleFormUpload ? 'open' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(IconContext.Provider, {\n      value: {\n        className: \"files-close\",\n        size: 30\n      },\n      children: /*#__PURE__*/_jsxDEV(AiFillCloseCircle, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"files-title\",\n      children: \"Upload Files\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper-audio\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"files-name\",\n        children: \"Audio\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"file\",\n        name: \"fileAudio\",\n        accept: \".mp3\",\n        className: \"files-input\",\n        onChange: handleChangeFiles\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"files-button\",\n        onClick: handleSaveAudio,\n        children: /*#__PURE__*/_jsxDEV(IconContext.Provider, {\n          value: {\n            size: 20,\n            color: '#ffffff'\n          },\n          children: /*#__PURE__*/_jsxDEV(FaCloudUploadAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 130,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress\",\n        style: {\n          height: '8px'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"progress-bar progress-bar-striped \",\n          role: \"progressbar\",\n          \"aria-valuemin\": \"0\",\n          \"aria-valuemax\": \"100\",\n          style: {\n            width: `${progessAudio}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper-image\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"files-name\",\n        children: \"Image\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 145,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        accept: \".jpg\",\n        type: \"file\",\n        name: \"fileImage\",\n        className: \"files-input\",\n        onChange: handleChangeFiles\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 146,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"files-button\",\n        onClick: handleSaveImage,\n        children: /*#__PURE__*/_jsxDEV(IconContext.Provider, {\n          value: {\n            size: 20,\n            color: '#ffffff'\n          },\n          children: /*#__PURE__*/_jsxDEV(FaCloudUploadAlt, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 157,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 152,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"progress\",\n        style: {\n          height: '8px',\n          Backgroundcolor: '#56184d'\n        },\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            backgroundColor: '#56184d'\n          },\n          className: \"progress-bar progress-bar-striped\",\n          role: \"progressbar\",\n          \"aria-valuemin\": \"0\",\n          \"aria-valuemax\": \"100\",\n          style: {\n            width: `${progessImage}%`\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 160,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrapper-upload\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Artist Name\",\n        name: \"artistName\",\n        className: \"files-text\",\n        value: artistName,\n        onChange: handleChangeText,\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 172,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Audio Name\",\n        onChange: handleChangeText,\n        name: \"audioName\",\n        value: audioName,\n        className: \"files-text\",\n        type: \"text\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"files-button__upload\",\n        onClick: onUploadDatabase,\n        children: \"L\\u01B0u l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 186,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 113,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Uploadfiles, \"NaL64PTONQhcd0RTbTcxBmED/GQ=\");\n\n_c = Uploadfiles;\nexport default Uploadfiles;\n\nvar _c;\n\n$RefreshReg$(_c, \"Uploadfiles\");","map":{"version":3,"sources":["D:/music-app/src/components/UploadFiles/index.jsx"],"names":["React","useState","storage","database","FaCloudUploadAlt","AiFillCloseCircle","IconContext","Uploadfiles","propTypes","default","toggleFormUpload","props","fileAudio","setfileAudio","fileImage","setfileImage","urlAudio","setUrlAudio","urlImage","setUrlImage","progessAudio","setProgessAudio","progessImage","setProgessImage","artistName","setAristName","audioName","setAudioName","handleChangeFiles","e","target","name","files","handleChangeText","value","handleSaveAudio","uploadTask","ref","put","on","snapshot","progressBarAudio","Math","round","bytesTransferred","totalBytes","error","console","log","child","getDownloadURL","then","handleSaveImage","progressBarImage","onUploadDatabase","databaseRef","push","src","image","artist","className","size","color","height","width","Backgroundcolor","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\r\nimport { storage, database } from '../../configFirebase';\r\nimport { FaCloudUploadAlt } from 'react-icons/fa';\r\nimport {\r\n    AiFillCloseCircle,\r\n} from 'react-icons/ai';\r\nimport './style.css';\r\nimport { IconContext } from 'react-icons/lib';\r\nUploadfiles.propTypes = {\r\n}\r\nUploadfiles.default = {\r\n    toggleFormUpload: false\r\n}\r\n\r\nfunction Uploadfiles(props) {\r\n    const [fileAudio, setfileAudio] = useState(null);\r\n    const [fileImage, setfileImage] = useState(null);\r\n    const [urlAudio, setUrlAudio] = useState(null);\r\n    const [urlImage, setUrlImage] = useState(null);\r\n    const [progessAudio, setProgessAudio] = useState(null);\r\n    const [progessImage, setProgessImage] = useState(null);\r\n    const [artistName, setAristName] = useState('');\r\n    const [audioName, setAudioName] = useState('');\r\n    const { toggleFormUpload } = props;\r\n    const handleChangeFiles = (e) => {\r\n        if (e.target.name === \"fileAudio\") {\r\n            setfileAudio(e.target.files[0])\r\n        }\r\n        if (e.target.name === \"fileImage\") {\r\n            setfileImage(e.target.files[0])\r\n        }\r\n    }\r\n    const handleChangeText = (e) => {\r\n        if (e.target.name === 'audioName') {\r\n            setAudioName(e.target.value);\r\n        } else {\r\n            setAristName(e.target.value);\r\n        }\r\n    }\r\n    const handleSaveAudio = () => {\r\n        if (fileAudio) {\r\n            const uploadTask = storage.ref(`Audios/${fileAudio.name}`).put(fileAudio);\r\n            uploadTask.on(\r\n                \"state_changed\",\r\n                (snapshot) => {\r\n                    const progressBarAudio = Math.round(\r\n                        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                    );\r\n                    setProgessAudio(progressBarAudio);\r\n                },\r\n                error => {\r\n                    console.log('err', error);\r\n                },\r\n                () => {\r\n                    storage\r\n                        .ref(`Audios`)\r\n                        .child(fileAudio.name)\r\n                        .getDownloadURL()\r\n                        .then(urlAudio => {\r\n                            setUrlAudio(urlAudio);\r\n                        })\r\n                }\r\n            )\r\n        }\r\n        else {\r\n            console.log('err')\r\n        }\r\n    }\r\n    const handleSaveImage = () => {\r\n        if (fileImage) {\r\n            const uploadTask = storage.ref(`Images/${fileImage.name}`).put(fileImage);\r\n            uploadTask.on(\r\n                \"state_changed\",\r\n                (snapshot) => {\r\n                    const progressBarImage = Math.round(\r\n                        (snapshot.bytesTransferred / snapshot.totalBytes) * 100\r\n                    );\r\n                    setProgessImage(progressBarImage);\r\n                },\r\n                error => {\r\n                    console.log('err', error);\r\n                },\r\n                () => {\r\n                    storage\r\n                        .ref(`Images`)\r\n                        .child(fileImage.name)\r\n                        .getDownloadURL()\r\n                        .then(urlImage => {\r\n                            setUrlImage(urlImage);\r\n                        })\r\n                }\r\n            )\r\n        }\r\n        else {\r\n            console.log('err')\r\n        }\r\n    }\r\n    const onUploadDatabase = () => {\r\n        const databaseRef = database.ref('Audios');\r\n        databaseRef.push({\r\n            src: urlAudio,\r\n            image: urlImage,\r\n            name: audioName,\r\n            artist: artistName\r\n        })\r\n        // reset value\r\n        setAristName('')\r\n        setAudioName('')\r\n        setProgessAudio(0)\r\n        setProgessImage(0)\r\n    }\r\n    return (\r\n        <div className={`form-upload ${toggleFormUpload ? 'open' : ''}`}>\r\n            <IconContext.Provider value={{ className: \"files-close\", size: 30 }}>\r\n                <AiFillCloseCircle />\r\n            </IconContext.Provider>\r\n            <p className=\"files-title\">Upload Files</p>\r\n            <div className=\"wrapper-audio\">\r\n                <span className=\"files-name\">Audio</span>\r\n                <input\r\n                    type=\"file\"\r\n                    name=\"fileAudio\"\r\n                    accept=\".mp3\"\r\n                    className=\"files-input\"\r\n                    onChange={handleChangeFiles} />\r\n                <button\r\n                    className=\"files-button\"\r\n                    onClick={handleSaveAudio}\r\n                >\r\n                    <IconContext.Provider value={{ size: 20, color: '#ffffff' }}>\r\n                        <FaCloudUploadAlt />\r\n                    </IconContext.Provider>\r\n                </button>\r\n                <div className=\"progress\" style={{ height: '8px', }}>\r\n                    <div\r\n                        className=\"progress-bar progress-bar-striped \"\r\n                        role=\"progressbar\"\r\n                        aria-valuemin=\"0\"\r\n                        aria-valuemax=\"100\"\r\n                        style={{ width: `${progessAudio}%` }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"wrapper-image\">\r\n                <span className=\"files-name\">Image</span>\r\n                <input\r\n                    accept=\".jpg\"\r\n                    type=\"file\"\r\n                    name=\"fileImage\"\r\n                    className=\"files-input\"\r\n                    onChange={handleChangeFiles} />\r\n                <button\r\n                    className=\"files-button\"\r\n                    onClick={handleSaveImage}\r\n                >\r\n                    <IconContext.Provider value={{ size: 20, color: '#ffffff' }}>\r\n                        <FaCloudUploadAlt />\r\n                    </IconContext.Provider>\r\n                </button>\r\n                <div className=\"progress\" style={{ height: '8px', Backgroundcolor: '#56184d' }}>\r\n                    <div\r\n                        style={{ backgroundColor: '#56184d' }}\r\n                        className=\"progress-bar progress-bar-striped\"\r\n                        role=\"progressbar\"\r\n                        aria-valuemin=\"0\"\r\n                        aria-valuemax=\"100\"\r\n                        style={{ width: `${progessImage}%` }}>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n            <div className=\"wrapper-upload\">\r\n                <input\r\n                    placeholder=\"Artist Name\"\r\n                    name=\"artistName\"\r\n                    className=\"files-text\"\r\n                    value={artistName}\r\n                    onChange={handleChangeText}\r\n                    type=\"text\" />\r\n                <input\r\n                    placeholder=\"Audio Name\"\r\n                    onChange={handleChangeText}\r\n                    name=\"audioName\"\r\n                    value={audioName}\r\n                    className=\"files-text\"\r\n                    type=\"text\" />\r\n                <button\r\n                    className=\"files-button__upload\"\r\n                    onClick={onUploadDatabase}\r\n                >Lưu lại\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n}\r\n\r\nexport default Uploadfiles;"]},"metadata":{},"sourceType":"module"}