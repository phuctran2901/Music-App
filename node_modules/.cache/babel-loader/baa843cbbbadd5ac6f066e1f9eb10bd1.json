{"ast":null,"code":"import _toConsumableArray from\"D:/music-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _regeneratorRuntime from\"D:/music-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/music-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"D:/music-app/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{useEffect,useRef,useState}from'react';import'./App.css';import UploadFiles from'./components/UploadFiles';import AudioItems from'./components/AudioItems';import TimeSlider from'react-input-slider';import{database}from'./configFirebase';import{FaFacebookSquare}from'react-icons/fa';import{AiOutlinePauseCircle,AiOutlinePlayCircle,AiOutlineCloseCircle}from'react-icons/ai';import{BiSkipNextCircle,BiSkipPreviousCircle}from'react-icons/bi';import{CgMenuGridR}from'react-icons/cg';import{IconContext}from'react-icons/lib';import{ToastContainer}from'react-toastify';import'react-toastify/dist/ReactToastify.css';var databaseRef=database.ref('Audios');var findIndex=function findIndex(id,array){var result=-1;array.forEach(function(ob,index){if(ob.id===id){result=index;}});return result;};function App(){var audioRef=useRef();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),playAndPauseAudio=_useState2[0],setplayAndPauseAudio=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),currentTime=_useState4[0],setCurrentTime=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),duration=_useState6[0],setDuration=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),index=_useState8[0],setIndex=_useState8[1];var _useState9=useState(0),_useState10=_slicedToArray(_useState9,2),activeID=_useState10[0],setActiveID=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),toggleListAudio=_useState12[0],setToggleListAudio=_useState12[1];var _useState13=useState(0),_useState14=_slicedToArray(_useState13,2),widthInput=_useState14[0],setWidthInput=_useState14[1];var _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),toggleFormUpload=_useState16[0],setToggleFormUpload=_useState16[1];var _useState17=useState([{src:'',image:'https://e1.pngegg.com/pngimages/893/102/png-clipart-iconlab-itunes-itunes-sunset-red-and-yellow-musical-note.png',title:'Vui lòng chờ...',artist:'Vui lòng chờ tải dữ liệu...',id:0}]),_useState18=_slicedToArray(_useState17,2),audios=_useState18[0],setAudios=_useState18[1];useEffect(function(){var widthScreen=window.screen.width;setWidthInput(widthScreen);function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:try{databaseRef.once('value').then(function(res){var data=[];var keys=Object.keys(res.val());var values=Object.values(res.val());keys.map(function(key,index){values[index].id=key;data.push(values[index]);return data;});setAudios(data);});}catch(err){console.log(err);}case 1:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);};fetchData();},[]);var handleOnChangeSlider=function handleOnChangeSlider(_ref){var x=_ref.x;audioRef.current.currentTime=x;setCurrentTime(x);if(!playAndPauseAudio){setplayAndPauseAudio(true);audioRef.current.play();}};var onClickAudio=function onClickAudio(){if(!playAndPauseAudio){audioRef.current.play();}else{audioRef.current.pause();}setplayAndPauseAudio(!playAndPauseAudio);};var handleOnLoadedData=function handleOnLoadedData(){setDuration(audioRef.current.duration);if(playAndPauseAudio){audioRef.current.play();}};var renderTime=function renderTime(){var html=null;var cMinute=Math.floor(currentTime/60);var cSecond=Math.floor(currentTime%60);var dMinute=Math.floor(duration/60);var dSecond=Math.floor(duration%60);var cTime=\"\".concat(cMinute,\" : \").concat(cSecond<10?\"0\".concat(cSecond):\"\".concat(cSecond));var dTime=\"\".concat(dMinute,\" : \").concat(dSecond<10?\"0\".concat(dSecond):\"\".concat(dSecond));html=\"\".concat(cTime,\" / \").concat(dTime);return html;};var selectIndex=function selectIndex(id){var index=findIndex(id,audios);if(index!==-1){setIndex(index);setActiveID(index);}};var onToggleListAudio=function onToggleListAudio(){setToggleListAudio(!toggleListAudio);};var onToggleFormUpload=function onToggleFormUpload(bool){setToggleFormUpload(bool);};var handleUploadSong=function handleUploadSong(song){var newAudios=_toConsumableArray(audios);newAudios.push(song);setAudios(newAudios);};var nextSong=function nextSong(){var lengthAudio=audios.length;if(index>=lengthAudio-1){setIndex(0);setActiveID(0);}else{setIndex(index+1);setActiveID(index+1);}if(playAndPauseAudio){audioRef.current.play();setplayAndPauseAudio(true);}};var preSong=function preSong(){var lengthAudio=audios.length;if(index<=0){setIndex(lengthAudio-1);setActiveID(lengthAudio-1);}else{setIndex(index-1);setActiveID(index-1);}if(playAndPauseAudio){audioRef.current.play();setplayAndPauseAudio(true);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"container-w\",children:[/*#__PURE__*/_jsx(UploadFiles,{toggleFormUpload:toggleFormUpload,handleToggleFormUpload:onToggleFormUpload,handleUploadSong:handleUploadSong}),/*#__PURE__*/_jsxs(\"div\",{children:[!toggleListAudio?/*#__PURE__*/_jsx(\"div\",{onClick:onToggleListAudio,children:/*#__PURE__*/_jsx(IconContext.Provider,{value:{size:40,color:'white',className:'icon-open active'},children:/*#__PURE__*/_jsx(CgMenuGridR,{})})}):'',/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-audio\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"audio-img \".concat(playAndPauseAudio?'active':''),src:audios[index].image,alt:audios[0].name}),/*#__PURE__*/_jsx(\"p\",{className:\"audio-name\",children:audios[index].name}),/*#__PURE__*/_jsx(\"p\",{className:\"audio-artist\",children:audios[index].artist}),/*#__PURE__*/_jsx(\"audio\",{ref:audioRef,src:audios[index].src,onLoadedData:handleOnLoadedData,onTimeUpdate:function onTimeUpdate(){setCurrentTime(audioRef.current.currentTime);},onEnded:function onEnded(){nextSong();}}),/*#__PURE__*/_jsx(\"p\",{className:\"audio-time\",children:renderTime()}),/*#__PURE__*/_jsxs(\"div\",{className:\"audio-controls\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"audio-button\",onClick:preSong,children:/*#__PURE__*/_jsx(IconContext.Provider,{value:{size:40},children:/*#__PURE__*/_jsx(BiSkipPreviousCircle,{})})}),/*#__PURE__*/_jsx(\"button\",{className:\"audio-button\",onClick:onClickAudio,children:/*#__PURE__*/_jsx(IconContext.Provider,{value:{size:40},children:playAndPauseAudio?/*#__PURE__*/_jsx(AiOutlinePauseCircle,{}):/*#__PURE__*/_jsx(AiOutlinePlayCircle,{})})}),/*#__PURE__*/_jsx(\"button\",{className:\"audio-button\",onClick:nextSong,children:/*#__PURE__*/_jsx(IconContext.Provider,{value:{size:40},children:/*#__PURE__*/_jsx(BiSkipNextCircle,{})})})]}),/*#__PURE__*/_jsx(TimeSlider,{axis:\"x\",xmin:0,x:currentTime,xmax:duration,onChange:handleOnChangeSlider,styles:{track:{backgroundColor:\"#e3e3e3\",height:\"8px\",width:\"\".concat(widthInput-widthInput*50/100,\"px\")},active:{backgroundColor:\"black\",height:\"8px\"},thumb:{width:\"20px\",height:\"20px\",backgroundColor:\"#e183e3\",borderRadius:'50px'}}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"wrapper-song \".concat(toggleListAudio?'active':''),children:[/*#__PURE__*/_jsx(\"div\",{onClick:onToggleListAudio,children:/*#__PURE__*/_jsx(IconContext.Provider,{value:{size:40,color:\"white\",className:\"icon-close\"},children:/*#__PURE__*/_jsx(AiOutlineCloseCircle,{})})}),/*#__PURE__*/_jsx(\"p\",{className:\"title-song\",children:\"List Audio\"}),/*#__PURE__*/_jsx(AudioItems,{active:activeID,data:audios,handleSaveIndex:selectIndex}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){return onToggleFormUpload(true);},className:\"btn-upload\",children:\"Upload Song\"}),/*#__PURE__*/_jsxs(\"a\",{href:\"https://www.facebook.com/profile.php?id=100010467708316\",className:\"messenger\",children:[\"B\\xE1o l\\u1ED7i t\\u1EA1i \",/*#__PURE__*/_jsx(FaFacebookSquare,{})]})]})]}),/*#__PURE__*/_jsx(ToastContainer,{})]});}export default App;","map":{"version":3,"sources":["D:/music-app/src/App.js"],"names":["useEffect","useRef","useState","UploadFiles","AudioItems","TimeSlider","database","FaFacebookSquare","AiOutlinePauseCircle","AiOutlinePlayCircle","AiOutlineCloseCircle","BiSkipNextCircle","BiSkipPreviousCircle","CgMenuGridR","IconContext","ToastContainer","databaseRef","ref","findIndex","id","array","result","forEach","ob","index","App","audioRef","playAndPauseAudio","setplayAndPauseAudio","currentTime","setCurrentTime","duration","setDuration","setIndex","activeID","setActiveID","toggleListAudio","setToggleListAudio","widthInput","setWidthInput","toggleFormUpload","setToggleFormUpload","src","image","title","artist","audios","setAudios","widthScreen","window","screen","width","fetchData","once","then","res","data","keys","Object","val","values","map","key","push","err","console","log","handleOnChangeSlider","x","current","play","onClickAudio","pause","handleOnLoadedData","renderTime","html","cMinute","Math","floor","cSecond","dMinute","dSecond","cTime","dTime","selectIndex","onToggleListAudio","onToggleFormUpload","bool","handleUploadSong","song","newAudios","nextSong","lengthAudio","length","preSong","size","color","className","name","track","backgroundColor","height","active","thumb","borderRadius"],"mappings":"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","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport './App.css';\nimport UploadFiles from './components/UploadFiles';\nimport AudioItems from './components/AudioItems';\nimport TimeSlider from 'react-input-slider';\nimport { database } from './configFirebase';\nimport {\n    FaFacebookSquare\n} from 'react-icons/fa';\nimport {\n    AiOutlinePauseCircle,\n    AiOutlinePlayCircle,\n    AiOutlineCloseCircle\n} from 'react-icons/ai';\nimport {\n    BiSkipNextCircle,\n    BiSkipPreviousCircle\n} from 'react-icons/bi';\nimport { CgMenuGridR } from 'react-icons/cg';\nimport { IconContext } from 'react-icons/lib';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nconst databaseRef = database.ref('Audios');\n\nconst findIndex = (id, array) => {\n    let result = -1;\n    array.forEach((ob, index) => {\n        if (ob.id === id) {\n            result = index;\n        }\n    });\n    return result;\n}\n\nfunction App() {\n    const audioRef = useRef();\n    const [playAndPauseAudio, setplayAndPauseAudio] = useState(false);\n    const [currentTime, setCurrentTime] = useState(0);\n    const [duration, setDuration] = useState(0);\n    const [index, setIndex] = useState(0);\n    const [activeID, setActiveID] = useState(0);\n    const [toggleListAudio, setToggleListAudio] = useState(true);\n    const [widthInput, setWidthInput] = useState(0);\n    const [toggleFormUpload, setToggleFormUpload] = useState(false);\n    const [audios, setAudios] = useState([\n        {\n            src: '',\n            image: 'https://e1.pngegg.com/pngimages/893/102/png-clipart-iconlab-itunes-itunes-sunset-red-and-yellow-musical-note.png',\n            title: 'Vui lòng chờ...',\n            artist: 'Vui lòng chờ tải dữ liệu...',\n            id: 0\n        }\n    ])\n    useEffect(() => {\n        const widthScreen = window.screen.width;\n        setWidthInput(widthScreen);\n        async function fetchData() {\n            try {\n                databaseRef.once('value').then(res => {\n                    const data = [];\n                    const keys = Object.keys(res.val());\n                    const values = Object.values(res.val());\n                    keys.map((key, index) => {\n                        values[index].id = key;\n                        data.push(values[index]);\n                        return data;\n                    })\n                    setAudios(data);\n                })\n            }\n            catch (err) {\n                console.log(err);\n            }\n        };\n        fetchData();\n    }, [])\n    const handleOnChangeSlider = ({ x }) => {\n        audioRef.current.currentTime = x;\n        setCurrentTime(x);\n        if (!playAndPauseAudio) {\n            setplayAndPauseAudio(true);\n            audioRef.current.play();\n        }\n    }\n    const onClickAudio = () => {\n        if (!playAndPauseAudio) {\n            audioRef.current.play();\n        }\n        else {\n            audioRef.current.pause();\n        }\n        setplayAndPauseAudio(!playAndPauseAudio);\n    }\n    const handleOnLoadedData = () => {\n        setDuration(audioRef.current.duration);\n        if (playAndPauseAudio) {\n            audioRef.current.play();\n        }\n    }\n    const renderTime = () => {\n        let html = null;\n        let cMinute = Math.floor(currentTime / 60);\n        let cSecond = Math.floor(currentTime % 60);\n        let dMinute = Math.floor(duration / 60);\n        let dSecond = Math.floor(duration % 60);\n        let cTime = `${cMinute} : ${cSecond < 10 ? `0${cSecond}` : `${cSecond}`}`;\n        let dTime = `${dMinute} : ${dSecond < 10 ? `0${dSecond}` : `${dSecond}`}`;\n        html = `${cTime} / ${dTime}`;\n        return html;\n    }\n    const selectIndex = (id) => {\n        let index = findIndex(id, audios);\n        if (index !== -1) {\n            setIndex(index);\n            setActiveID(index);\n        }\n    }\n    const onToggleListAudio = () => {\n        setToggleListAudio(!toggleListAudio);\n    }\n    const onToggleFormUpload = (bool) => {\n        setToggleFormUpload(bool);\n    }\n    const handleUploadSong = (song) => {\n        const newAudios = [...audios];\n        newAudios.push(song);\n        setAudios(newAudios);\n    }\n    const nextSong = () => {\n        let lengthAudio = audios.length;\n        if (index >= lengthAudio - 1) {\n            setIndex(0);\n            setActiveID(0)\n        } else {\n            setIndex(index + 1);\n            setActiveID(index + 1);\n        }\n        if (playAndPauseAudio) {\n            audioRef.current.play();\n            setplayAndPauseAudio(true);\n        }\n    }\n    const preSong = () => {\n        let lengthAudio = audios.length;\n        if (index <= 0) {\n            setIndex(lengthAudio - 1);\n            setActiveID(lengthAudio - 1);\n        } else {\n            setIndex(index - 1);\n            setActiveID(index - 1);\n        }\n        if (playAndPauseAudio) {\n            audioRef.current.play();\n            setplayAndPauseAudio(true);\n        }\n    }\n    return (\n        <div className=\"container-w\">\n            <UploadFiles\n                toggleFormUpload={toggleFormUpload}\n                handleToggleFormUpload={onToggleFormUpload}\n                handleUploadSong={handleUploadSong}\n            />\n            <div>\n                {!toggleListAudio ? <div onClick={onToggleListAudio}>\n                    <IconContext.Provider value={{ size: 40, color: 'white', className: 'icon-open active' }}>\n                        <CgMenuGridR />\n                    </IconContext.Provider>\n                </div> : ''}\n                <div className=\"wrapper-audio\">\n                    <img className={`audio-img ${playAndPauseAudio ? 'active' : ''}`} src={audios[index].image} alt={audios[0].name} />\n                    <p className=\"audio-name\">{audios[index].name}</p>\n                    <p className=\"audio-artist\">{audios[index].artist}</p>\n                    <audio\n                        ref={audioRef}\n                        src={audios[index].src}\n                        onLoadedData={handleOnLoadedData}\n                        onTimeUpdate={() => {\n                            setCurrentTime(audioRef.current.currentTime)\n                        }}\n                        onEnded={() => {\n                            nextSong()\n                        }}\n                    ></audio>\n                    <p className=\"audio-time\">\n                        {renderTime()}\n                    </p>\n                    <div className=\"audio-controls\">\n                        <button className=\"audio-button\" onClick={preSong}>\n                            <IconContext.Provider value={{ size: 40 }}>\n                                <BiSkipPreviousCircle />\n                            </IconContext.Provider>\n                        </button>\n                        <button className=\"audio-button\" onClick={onClickAudio}>\n                            <IconContext.Provider value={{ size: 40 }}>\n                                {playAndPauseAudio ? <AiOutlinePauseCircle /> : <AiOutlinePlayCircle />}\n                            </IconContext.Provider>\n                        </button>\n                        <button className=\"audio-button\" onClick={nextSong}>\n                            <IconContext.Provider value={{ size: 40 }}>\n                                <BiSkipNextCircle />\n                            </IconContext.Provider>\n                        </button>\n                    </div>\n                    <TimeSlider\n                        axis=\"x\"\n                        xmin={0}\n                        x={currentTime}\n                        xmax={duration}\n                        onChange={handleOnChangeSlider}\n                        styles={{\n                            track: {\n                                backgroundColor: \"#e3e3e3\",\n                                height: \"8px\",\n                                width: `${widthInput - widthInput * 50 / 100}px`\n                            },\n                            active: {\n                                backgroundColor: \"black\",\n                                height: \"8px\",\n                            },\n                            thumb: {\n                                width: \"20px\",\n                                height: \"20px\",\n                                backgroundColor: \"#e183e3\",\n                                borderRadius: '50px',\n                            },\n                        }}\n                    />\n                </div>\n                <div className={`wrapper-song ${toggleListAudio ? 'active' : ''}`}>\n                    <div onClick={onToggleListAudio}>\n                        <IconContext.Provider value={{ size: 40, color: \"white\", className: \"icon-close\" }}>\n                            <AiOutlineCloseCircle />\n                        </IconContext.Provider>\n                    </div>\n                    <p className=\"title-song\">List Audio</p>\n                    <AudioItems\n                        active={activeID}\n                        data={audios}\n                        handleSaveIndex={selectIndex}\n                    />\n                    <button\n                        onClick={() => onToggleFormUpload(true)}\n                        className=\"btn-upload\">Upload Song</button>\n                    <a href=\"https://www.facebook.com/profile.php?id=100010467708316\" className=\"messenger\">Báo lỗi tại <FaFacebookSquare /></a>\n                </div>\n            </div>\n            <ToastContainer />\n        </div>\n\n    );\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}